# name: Deploy S3 Bucket

# on:
#   push:
#     branches:
#       - main      # runs only after feature â†’ main merge

# permissions:
#   id-token: write     # required for OIDC
#   contents: read

# jobs:
#   deploy-s3:
#     runs-on: self-hosted

#     steps:
#       - name: Checkout repo
#         uses: actions/checkout@v4

#       - name: Configure AWS Credentials (OIDC)
#         uses: aws-actions/configure-aws-credentials@v4
#         with:
#           role-to-assume: arn:aws:iam::853973692277:role/Github-OIDC-Role
#           role-session-name: github-actions
#           aws-region: us-east-1

#       - name: Create S3 bucket
#         run: |
#           BUCKET_NAME="dk-feature-bucket-$(date +'%Y%m%d%H%M%S')"
#           echo "BUCKET_NAME=$BUCKET_NAME" >> $GITHUB_ENV

#           aws s3api create-bucket \
#             --bucket "$BUCKET_NAME" \
#             --region us-east-1 \
#             --create-bucket-configuration LocationConstraint=us-east-1

#       - name: Upload file to S3
#         run: |
#           aws s3 cp ../upload/file.txt "s3://$BUCKET_NAME/"
